<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Operasi Vektor Secara Grafis</title>
<style>
:root {
  --bg: #1e293b;
  --card: #273447;
  --ink: #f1f5f9;
  --muted: #94a3b8;
  --accent: #60a5fa;
  --border: #334155;
  --grid: #334155;
  --red: #ef4444;
  --green: #22c55e;
  --blue: #3b82f6;
}

* { box-sizing: border-box; }
body {
  margin: 0;
  font: 16px/1.5 system-ui, Segoe UI, Roboto, Helvetica, Arial;
  background: var(--bg);
  color: var(--ink);
}

header {
  text-align: center;
  padding: 24px 16px 16px;
  background: var(--card);
  border-bottom: 1px solid var(--border);
}
h1 {
  margin: 0.3rem 0;
  font-weight: 800;
  font-size: 1.8rem;
  color: var(--ink);
}
.sub {
  color: var(--muted);
  font-size: 1rem;
}

.wrap {
  max-width: 1100px;
  margin: 24px auto;
  padding: 0 16px;
}
.tabs {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}
.tab {
  padding: 10px 14px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--muted);
  cursor: pointer;
}
.tab.active {
  background: var(--accent);
  color: #fff;
  font-weight: 700;
}

.grid {
  display: grid;
  grid-template-columns: 380px 1fr;
  gap: 18px;
  margin-top: 16px;
}
.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 16px;
}
h2 {
  margin: 0.2rem 0 0.6rem;
  font-size: 1.1rem;
}
details {
  border: 1px dashed var(--border);
  border-radius: 10px;
  padding: 10px;
  margin: 8px 0;
  background: #1e293b;
}
label {
  display: block;
  margin: 0.3rem 0;
  color: var(--muted);
  font-size: 0.92rem;
}
input {
  width: 100%;
  padding: 10px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--bg);
  color: var(--ink);
}
.row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}
canvas {
  width: 100%;
  height: 520px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 14px;
}
.btns {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-top: 8px;
}
button {
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--ink);
  cursor: pointer;
}
button.primary {
  background: var(--accent);
  color: #fff;
  border: none;
  font-weight: 700;
}
.kpi {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
  margin-top: 8px;
}
.chip {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 10px;
  text-align: center;
}
footer {
  opacity: 0.7;
  text-align: center;
  padding: 24px 8px;
  color: var(--muted);
}
@media (max-width: 980px) { .grid { grid-template-columns: 1fr; } }
</style>
</head>
<body>

<header>
  <h1>Operasi Vektor Secara Grafis</h1>
  <div class="sub">Metode Poligon dan Metode Jajargenjang</div>
</header>

<div class="wrap">
  <div class="tabs" id="tabs">
    <button class="tab active" data-tab="poly">Metode Poligon</button>
    <button class="tab" data-tab="para">Metode Jajargenjang</button>
  </div>

  <!-- POLIGON -->
  <section id="poly" class="grid">
    <div class="card">
      <h2>Orientasi Masalah</h2>
      <details open>
        <summary><strong>Kasus:</strong> Resultan Perpindahan Tiga Lintasan</summary>
        <p>Sebuah robot bergerak pada bidang datar: pertama maju, lalu serong, dan terakhir turun.
        Tentukan arah dan besar <em>perpindahan total</em> secara grafis dengan menyusun vektor
        <b>ujung ke pangkal</b>.</p>
      </details>

      <h2>Input Vektor</h2>
      <div class="row">
        <div><label>A – besar</label><input id="pa" type="number" step="0.1" value="4"></div>
        <div><label>A – sudut (°)</label><input id="ta" type="number" step="1" value="0"></div>
      </div>
      <div class="row">
        <div><label>B – besar</label><input id="pb" type="number" step="0.1" value="3"></div>
        <div><label>B – sudut (°)</label><input id="tb" type="number" step="1" value="-45"></div>
      </div>
      <div class="row">
        <div><label>C – besar</label><input id="pc" type="number" step="0.1" value="2"></div>
        <div><label>C – sudut (°)</label><input id="tc" type="number" step="1" value="-90"></div>
      </div>
      <div class="btns">
        <button class="primary" id="draw-poly">Gambar & Hitung</button>
        <button id="reset-poly">Reset</button>
      </div>
      <div class="kpi">
        <div class="chip"><div>R<sub>x</sub></div><div id="rxp">–</div></div>
        <div class="chip"><div>R<sub>y</sub></div><div id="ryp">–</div></div>
        <div class="chip"><div>|R|</div><div id="rmp">–</div></div>
        <div class="chip"><div>θ (°)</div><div id="rtp">–</div></div>
      </div>
    </div>

    <div class="card">
      <h2>Gambar – Metode Poligon</h2>
      <canvas id="canvas-poly" width="800" height="520"></canvas>
    </div>
  </section>

  <!-- JAJARGENJANG -->
  <section id="para" class="grid" style="display:none;">
    <div class="card">
      <h2>Orientasi Masalah</h2>
      <details open>
        <summary><strong>Kasus:</strong> Dua Gaya Menarik Benda dari Satu Titik</summary>
        <p>Sebuah kotak ditarik dua tali: satu ke arah timur-laut dan satu lagi ke arah timur-tenggara.
        Tentukan resultan gaya secara grafis dengan <b>metode jajargenjang</b>.</p>
      </details>

      <h2>Input Vektor</h2>
      <div class="row">
        <div><label>A – besar</label><input id="qa" type="number" step="0.1" value="5"></div>
        <div><label>A – sudut (°)</label><input id="ua" type="number" step="1" value="45"></div>
      </div>
      <div class="row">
        <div><label>B – besar</label><input id="qb" type="number" step="0.1" value="5"></div>
        <div><label>B – sudut (°)</label><input id="ub" type="number" step="1" value="-30"></div>
      </div>
      <div class="btns">
        <button class="primary" id="draw-para">Gambar & Hitung</button>
        <button id="reset-para">Reset</button>
      </div>
      <div class="kpi">
        <div class="chip"><div>R<sub>x</sub></div><div id="rxq">–</div></div>
        <div class="chip"><div>R<sub>y</sub></div><div id="ryq">–</div></div>
        <div class="chip"><div>|R|</div><div id="rmq">–</div></div>
        <div class="chip"><div>θ (°)</div><div id="rtq">–</div></div>
      </div>
    </div>

    <div class="card">
      <h2>Gambar – Metode Jajargenjang</h2>
      <canvas id="canvas-para" width="800" height="520"></canvas>
    </div>
  </section>

  <footer>© LKPD Interaktif – Operasi Vektor Grafis</footer>
</div>

<script>
const toRad = d => d * Math.PI / 180;
const round = (x, n = 2) => Number(x.toFixed(n));
function comp(m, d) {
  const t = toRad(d);
  return { x: m * Math.cos(t), y: m * Math.sin(t) };
}
function sum(vs) {
  return vs.reduce((s, v) => ({ x: s.x + v.x, y: s.y + v.y }), { x: 0, y: 0 });
}
function mag(v) { return Math.hypot(v.x, v.y); }
function ang(v) { return (Math.atan2(v.y, v.x) * 180 / Math.PI); }

function drawBase(ctx, w, h) {
  ctx.clearRect(0, 0, w, h);
  ctx.strokeStyle = "#334155"; ctx.lineWidth = 1;
  for (let x = 0; x < w; x += 30) { ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, h); ctx.stroke(); }
  for (let y = 0; y < h; y += 30) { ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(w, y); ctx.stroke(); }
  ctx.strokeStyle = "#475569"; ctx.lineWidth = 1.5;
  ctx.beginPath(); ctx.moveTo(0, h / 2); ctx.lineTo(w, h / 2); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(w / 2, 0); ctx.lineTo(w / 2, h); ctx.stroke();
  return { cx: w / 2, cy: h / 2, scale: 30 };
}
function arrow(ctx, x1, y1, x2, y2, color) {
  ctx.strokeStyle = color; ctx.lineWidth = 3;
  ctx.beginPath(); ctx.moveTo(x1, y1); ctx.lineTo(x2, y2); ctx.stroke();
  const a = Math.atan2(y2 - y1, x2 - x1);
  const h = 10, w = 6;
  ctx.beginPath();
  ctx.moveTo(x2, y2);
  ctx.lineTo(x2 - h * Math.cos(a) - w * Math.sin(a), y2 - h * Math.sin(a) + w * Math.cos(a));
  ctx.lineTo(x2 - h * Math.cos(a) + w * Math.sin(a), y2 - h * Math.sin(a) - w * Math.cos(a));
  ctx.closePath(); ctx.fillStyle = color; ctx.fill();
}

function drawPolygon() {
  const A = +pa.value, B = +pb.value, C = +pc.value;
  const a = +ta.value, b = +tb.value, c = +tc.value;
  const va = comp(A, a), vb = comp(B, b), vc = comp(C, c);
  const R = sum([va, vb, vc]);
  const ctx = canvasPoly.getContext("2d");
  const { cx, cy, scale } = drawBase(ctx, 800, 520);
  const P = (x, y) => ({ X: cx + x * scale, Y: cy - y * scale });
  const A1 = P(va.x, va.y);
  const B1 = P(va.x + vb.x, va.y + vb.y);
  const R1 = P(R.x, R.y);
  arrow(ctx, cx, cy, A1.X, A1.Y, "#ef4444");
  arrow(ctx, A1.X, A1.Y, B1.X, B1.Y, "#3b82f6");
  arrow(ctx, B1.X, B1.Y, R1.X, R1.Y, "#22c55e");
  ctx.setLineDash([8, 6]);
  arrow(ctx, cx, cy, R1.X, R1.Y, "#94a3b8");
  ctx.setLineDash([]);
  rxp.textContent = round(R.x);
  ryp.textContent = round(R.y);
  rmp.textContent = round(mag(R));
  rtp.textContent = round(ang(R));
}
drawPoly.onclick = drawPolygon;
resetPoly.onclick = () => {
  const ctx = canvasPoly.getContext("2d");
  drawBase(ctx, 800, 520);
  ["rxp", "ryp", "rmp", "rtp"].forEach(id => (window[id].textContent = "–"));
};

function drawParallelogram() {
  const A = +qa.value, B = +qb.value, a = +ua.value, b = +ub.value;
  const va = comp(A, a), vb = comp(B, b), R = sum([va, vb]);
  const ctx = canvasPara.getContext("2d");
  const { cx, cy, scale } = drawBase(ctx, 800, 520);
  const P = (x, y) => ({ X: cx + x * scale, Y: cy - y * scale });
  const A1 = P(va.x, va.y), B1 = P(vb.x, vb.y), R1 = P(R.x, R.y);
  arrow(ctx, cx, cy, A1.X, A1.Y, "#ef4444");
  arrow(ctx, cx, cy, B1.X, B1.Y, "#3b82f6");
  ctx.setLineDash([6, 6]); ctx.strokeStyle = "#64748b";
  ctx.beginPath(); ctx.moveTo(A1.X, A1.Y); ctx.lineTo(A1.X + (B1.X - cx), A1.Y + (B1.Y - cy)); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(B1.X, B1.Y); ctx.lineTo(B1.X + (A1.X - cx), B1.Y + (A1.Y - cy)); ctx.stroke();
  ctx.setLineDash([]);
  arrow(ctx, cx, cy, R1.X, R1.Y, "#60a5fa");
  rxq.textContent = round(R.x);
  ryq.textContent = round(R.y);
  rmq.textContent = round(mag(R));
  rtq.textContent = round(ang(R));
}
drawPara.onclick = drawParallelogram;
resetPara.onclick = () => {
  const ctx = canvasPara.getContext("2d");
  drawBase(ctx, 800, 520);
  ["rxq", "ryq", "rmq", "rtq"].forEach(id => (window[id].textContent = "–"));
};

document.querySelectorAll("#tabs .tab").forEach(b => {
  b.addEventListener("click", () => {
    document.querySelectorAll("#tabs .tab").forEach(x => x.classList.remove("active"));
    b.classList.add("active");
    document.getElementById("poly").style.display = b.dataset.tab === "poly" ? "grid" : "none";
    document.getElementById("para").style.display = b.dataset.tab === "para" ? "grid" : "none";
  });
});
</script>
</body>
</html>
